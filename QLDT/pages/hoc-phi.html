<!-- Tiêu đề trang -->
<h1 class="page-title">
  <i class="fa fa-money" style="color: #4caf50"></i> Học phí
</h1>

<!-- Thống kê học phí -->
<div class="tuition-stats">
  <div class="stat-item">
    <div class="stat-value">0 VNĐ</div>
    <div class="stat-label">Công nợ học phí</div>
  </div>
  <div class="stat-item">
    <div class="stat-value">15,000,000 VNĐ</div>
    <div class="stat-label">Đã thanh toán</div>
  </div>
  <div class="stat-item">
    <div class="stat-value">0 VNĐ</div>
    <div class="stat-label">Dư nợ</div>
  </div>
  <div class="stat-item">
    <div class="stat-value">15,000,000 VNĐ</div>
    <div class="stat-label">Tổng học phí</div>
  </div>
</div>

<!-- Chọn học kỳ -->
<div class="semester-selector">
  <label for="semester-select">Chọn học kỳ:</label>
  <select id="semester-select" onchange="loadTuitionData()">
    <option value="2023-2024-2">Học kỳ 2, năm học 2023-2024</option>
    <option value="2023-2024-1">Học kỳ 1, năm học 2023-2024</option>
    <option value="2022-2023-2">Học kỳ 2, năm học 2022-2023</option>
    <option value="2022-2023-1">Học kỳ 1, năm học 2022-2023</option>
    <option value="2021-2022-2">Học kỳ 2, năm học 2021-2022</option>
    <option value="2021-2022-1">Học kỳ 1, năm học 2021-2022</option>
    <option value="2020-2021-2">Học kỳ 2, năm học 2020-2021</option>
    <option value="2020-2021-1">Học kỳ 1, năm học 2020-2021</option>
  </select>
</div>

<!-- Thông tin học phí học kỳ hiện tại -->
<div class="tuition-info">
  <div class="info-header">
    <h2 class="section-title">Thông tin học phí học kỳ 2, năm học 2023-2024</h2>
    <div class="semester-status">
      <span class="status-paid">Đã thanh toán</span>
    </div>
  </div>

  <div class="info-summary">
    <div class="summary-item">
      <div class="summary-label">Tổng số tín chỉ đăng ký:</div>
      <div class="summary-value">24 tín chỉ</div>
    </div>
    <div class="summary-item">
      <div class="summary-label">Học phí theo tín chỉ:</div>
      <div class="summary-value">15,000,000 VNĐ</div>
    </div>
    <div class="summary-item">
      <div class="summary-label">Miễn giảm học phí:</div>
      <div class="summary-value">0 VNĐ</div>
    </div>
    <div class="summary-item">
      <div class="summary-label">Học phí phải nộp:</div>
      <div class="summary-value">15,000,000 VNĐ</div>
    </div>
    <div class="summary-item">
      <div class="summary-label">Đã thanh toán:</div>
      <div class="summary-value">15,000,000 VNĐ</div>
    </div>
    <div class="summary-item">
      <div class="summary-label">Còn phải nộp:</div>
      <div class="summary-value">0 VNĐ</div>
    </div>
    <div class="summary-item">
      <div class="summary-label">Hạn nộp:</div>
      <div class="summary-value">15/02/2024</div>
    </div>
    <div class="summary-item">
      <div class="summary-label">Trạng thái:</div>
      <div class="summary-value status-paid">Đã thanh toán</div>
    </div>
  </div>
</div>

<!-- Chi tiết học phí theo môn học -->
<div class="tuition-details">
  <h2 class="section-title">Chi tiết học phí theo môn học</h2>

  <div class="tuition-table-container">
    <table class="tuition-table">
      <thead>
        <tr>
          <th>STT</th>
          <th>Mã học phần</th>
          <th>Tên học phần</th>
          <th>Số tín chỉ</th>
          <th>Học phí/tín chỉ</th>
          <th>Thành tiền</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>1</td>
          <td>LTWNC01</td>
          <td>Lập trình Web nâng cao</td>
          <td>3</td>
          <td>625,000 VNĐ</td>
          <td>1,875,000 VNĐ</td>
        </tr>
        <tr>
          <td>2</td>
          <td>TTNT02</td>
          <td>Trí tuệ nhân tạo</td>
          <td>3</td>
          <td>625,000 VNĐ</td>
          <td>1,875,000 VNĐ</td>
        </tr>
        <tr>
          <td>3</td>
          <td>PTTKHT01</td>
          <td>Phân tích và thiết kế hệ thống</td>
          <td>4</td>
          <td>625,000 VNĐ</td>
          <td>2,500,000 VNĐ</td>
        </tr>
        <tr>
          <td>4</td>
          <td>JAVA03</td>
          <td>Lập trình Java</td>
          <td>3</td>
          <td>625,000 VNĐ</td>
          <td>1,875,000 VNĐ</td>
        </tr>
        <tr>
          <td>5</td>
          <td>CSDL02</td>
          <td>Cơ sở dữ liệu</td>
          <td>4</td>
          <td>625,000 VNĐ</td>
          <td>2,500,000 VNĐ</td>
        </tr>
        <tr>
          <td>6</td>
          <td>MMT01</td>
          <td>Mạng máy tính</td>
          <td>3</td>
          <td>625,000 VNĐ</td>
          <td>1,875,000 VNĐ</td>
        </tr>
        <tr>
          <td>7</td>
          <td>KTPM02</td>
          <td>Kiểm thử phần mềm</td>
          <td>2</td>
          <td>625,000 VNĐ</td>
          <td>1,250,000 VNĐ</td>
        </tr>
        <tr>
          <td>8</td>
          <td>ATTT01</td>
          <td>An toàn thông tin</td>
          <td>2</td>
          <td>625,000 VNĐ</td>
          <td>1,250,000 VNĐ</td>
        </tr>
      </tbody>
      <tfoot>
        <tr>
          <td colspan="3" class="text-right">Tổng cộng:</td>
          <td>24</td>
          <td></td>
          <td>15,000,000 VNĐ</td>
        </tr>
      </tfoot>
    </table>
  </div>
</div>

<!-- Lịch sử thanh toán -->
<div class="payment-history">
  <h2 class="section-title">Lịch sử thanh toán</h2>

  <div class="payment-table-container">
    <table class="payment-table">
      <thead>
        <tr>
          <th>STT</th>
          <th>Ngày thanh toán</th>
          <th>Số tiền</th>
          <th>Phương thức</th>
          <th>Mã giao dịch</th>
          <th>Trạng thái</th>
          <th>Thao tác</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>1</td>
          <td>10/02/2024</td>
          <td>15,000,000 VNĐ</td>
          <td>Chuyển khoản ngân hàng</td>
          <td>VNPAY123456789</td>
          <td><span class="status-completed">Thành công</span></td>
          <td>
            <button
              class="action-btn view-btn"
              title="Xem chi tiết"
              onclick="viewPaymentDetail('VNPAY123456789')"
            >
              <i class="fa fa-eye"></i>
            </button>
            <button
              class="action-btn download-btn"
              title="Tải biên lai"
              onclick="downloadReceipt('VNPAY123456789')"
            >
              <i class="fa fa-download"></i>
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<!-- Nút thanh toán học phí -->
<div class="payment-actions">
  <button class="payment-btn" onclick="showPaymentMethods()" disabled>
    <i class="fa fa-credit-card"></i> Thanh toán học phí
  </button>
  <button class="receipt-btn" onclick="downloadAllReceipts()">
    <i class="fa fa-file-text-o"></i> Xuất biên lai
  </button>
</div>

<!-- Modal phương thức thanh toán (mặc định ẩn) -->
<div id="payment-modal" class="modal">
  <div class="modal-content">
    <div class="modal-header">
      <h3>Chọn phương thức thanh toán</h3>
      <span class="close-modal" onclick="hidePaymentModal()">&times;</span>
    </div>
    <div class="modal-body">
      <div class="payment-methods">
        <div class="payment-method">
          <input
            type="radio"
            id="method-vnpay"
            name="payment-method"
            value="vnpay"
            checked
          />
          <label for="method-vnpay">
            <img src="https://via.placeholder.com/100x40" alt="VNPAY" />
            <span>Thanh toán qua VNPAY</span>
          </label>
        </div>
        <div class="payment-method">
          <input
            type="radio"
            id="method-momo"
            name="payment-method"
            value="momo"
          />
          <label for="method-momo">
            <img src="https://via.placeholder.com/100x40" alt="MoMo" />
            <span>Thanh toán qua MoMo</span>
          </label>
        </div>
        <div class="payment-method">
          <input
            type="radio"
            id="method-bank"
            name="payment-method"
            value="bank"
          />
          <label for="method-bank">
            <img
              src="https://via.placeholder.com/100x40"
              alt="Internet Banking"
            />
            <span>Thanh toán qua Internet Banking</span>
          </label>
        </div>
        <div class="payment-method">
          <input type="radio" id="method-qr" name="payment-method" value="qr" />
          <label for="method-qr">
            <img src="https://via.placeholder.com/100x40" alt="QR Code" />
            <span>Quét mã QR</span>
          </label>
        </div>
      </div>

      <div class="payment-summary">
        <h4>Thông tin thanh toán</h4>
        <div class="summary-row">
          <div class="summary-label">Học kỳ:</div>
          <div class="summary-value">Học kỳ 2, năm học 2023-2024</div>
        </div>
        <div class="summary-row">
          <div class="summary-label">Số tiền:</div>
          <div class="summary-value">15,000,000 VNĐ</div>
        </div>
        <div class="summary-row">
          <div class="summary-label">Phí giao dịch:</div>
          <div class="summary-value">0 VNĐ</div>
        </div>
        <div class="summary-row total">
          <div class="summary-label">Tổng cộng:</div>
          <div class="summary-value">15,000,000 VNĐ</div>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button class="cancel-btn" onclick="hidePaymentModal()">Hủy</button>
      <button class="proceed-btn" onclick="proceedPayment()">
        Tiến hành thanh toán
      </button>
    </div>
  </div>
</div>

<script>
  // Hàm tải dữ liệu học phí theo học kỳ
  function loadTuitionData() {
    const selectedSemester = document.getElementById("semester-select").value;
    console.log("Đang tải dữ liệu học phí cho học kỳ: " + selectedSemester);

    // Trong thực tế, đây sẽ là API call để lấy dữ liệu học phí theo học kỳ
    // fetchTuitionData(selectedSemester);
  }

  // Hàm hiển thị modal phương thức thanh toán
  function showPaymentMethods() {
    const modal = document.getElementById("payment-modal");
    modal.style.display = "block";
  }

  // Hàm ẩn modal phương thức thanh toán
  function hidePaymentModal() {
    const modal = document.getElementById("payment-modal");
    modal.style.display = "none";
  }

  // Hàm xử lý khi tiến hành thanh toán
  function proceedPayment() {
    const selectedMethod = document.querySelector(
      'input[name="payment-method"]:checked'
    ).value;
    console.log("Phương thức thanh toán được chọn: " + selectedMethod);

    // Trong thực tế, đây sẽ là chuyển hướng đến trang thanh toán của đối tác
    alert("Đang chuyển hướng đến trang thanh toán...");

    // Ẩn modal
    hidePaymentModal();
  }

  // Hàm xem chi tiết giao dịch
  function viewPaymentDetail(transactionId) {
    console.log("Xem chi tiết giao dịch: " + transactionId);

    // Trong thực tế, đây sẽ là API call để lấy chi tiết giao dịch
    alert("Đang tải thông tin chi tiết giao dịch " + transactionId);
  }

  // Hàm tải biên lai
  function downloadReceipt(transactionId) {
    console.log("Tải biên lai giao dịch: " + transactionId);

    // Trong thực tế, đây sẽ là API call để tải biên lai
    alert("Đang tải biên lai giao dịch " + transactionId);
  }

  // Hàm xuất tất cả biên lai
  function downloadAllReceipts() {
    console.log("Xuất tất cả biên lai");

    // Trong thực tế, đây sẽ là API call để tải tất cả biên lai
    alert("Đang tải tất cả biên lai học phí");
  }

  // Đóng modal khi click bên ngoài
  window.onclick = function (event) {
    const modal = document.getElementById("payment-modal");
    if (event.target == modal) {
      modal.style.display = "none";
    }
  };
</script>
